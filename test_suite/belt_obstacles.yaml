- name: Perpendicular belt
  before: _ _ u
  after: r ri u ro r r

- name: Multiple perpendicular belt
  before: _ _ u d
  after: r ri u d ro r r

- name: Backwards curved belt
  before: |
    _ _ d
    _ _ l
  after: |
    _ _  d _
    r ri l ro r

- name: Forwards curved belt
  before: |
    _ _ d
    _ _ r
  after: |
    _ _  d _
    r ri r ro r

- name: Forwards curved belt continuation
  before: |
    _ _ d
    _ _ r r
  after: |
    _ _  d _
    r ri r r ro r

- name: Backwards curved belt continuation
  before: |
    _ _ _ d
    _ _ l l
  after: |
    _ _  _ d _
    r ri l l ro r

- name: Forwards curved belt continuation, too long
  before: |
    _ _ d
    _ _ r r r r r
  after: |
    _ _  d _
    r r r r r r r *r
  expected_errors: [too_far_to_connect]

- name: Backwards curved belt continuation, too long to check
  before: |
    _ _ _ _ _ d
    _ l l l l l
  after: |
    _ _ _ _ _ d
    r r r r r l *r
  expected_errors: [entity_in_the_way]

- name: 2 backwards curved belts
  before: |
    _ _ _ d
    _ _ u l
  after: |
    _ _ _  d _
    r ri u l ro r

- name: 2 forwards curved belts
  before: |
    _ _ d
    _ _ r u
  after: |
    _ _  d _ _
    r ri r u ro r

- name: sideloaded belt is normal obstacle
  before: |
    _ _ r u l
  after: |
    r r ri u ro r

- name: sideloaded belt is normal obstacle 2
  before: |
    _ _ d
    _ _ d l _
  after: |
    _ _  d
    r ri d ro r

- name: sideloaded belt is not obstacle
  before: |
    _ _ d
    _ r r _ _
  after: |
    _ _ d
    r r r r r

- name: curved belt after obstacle is obstacle
  before: |
    _ _ d
    _ X r
  after: |
    _  _ d
    ri X r ro r

- name: running into a curved belt is error
  before: |
    _ r u
  after: |
    r r u *r
  expected_errors: [entity_in_the_way]

- name: hovering over curved belt gives no error
  before: |
    _ r u
  after: |
    r r u

- name: curvy
  before: |
    _ _ _ u _ _ u
    _ _ r u _ r u
    _ _ u _ _ u _
  after: |
    _  _   _ u _ _ u
    2r 2ri r u _ r u 2ro
    _  _   u _ _ u _

- name: first belt shouldn't change effective curvature
  before: _ u l
  after: ri u l ro

- name: Belt weaving over backwards belt segment with curve
  before: |
    _ _ _  _  d
    _ l lo li l
  after: |
    _ _ _  _  d
    2ri l lo li l 2ro

- name: Integrating backwards belt segment without curve
  before: _ l lo li l
  after: 2r 2r 2ri 2ro 2r

- name: If can't belt weave, is error
  before: |
    _ _ _  _  d
    _ l lo li l
  after: |
    _  _ _  _   d
    r r ri ro *l r
  expected_errors: [entity_in_the_way]
