- name: Perpendicular belt
  before: _ _ ^
  after: "> >i ^ >o >"

- name: Multiple perpendicular belt
  before: _ _ ^ v
  after: "> >i ^ v >o >"

- name: Backwards curved belt
  before: |
    _ _ v
    _ _ <
  after: |
    _ _  v _
    > >i < >o >

- name: Forwards curved belt
  before: |
    _ _ v
    _ _ >
  after: |
    _ _  v _
    > >i > >o >

- name: Forwards curved belt continuation
  before: |
    _ _ v
    _ _ > >
  after: |
    _ _  v _
    > >i > > >o >

- name: Backwards curved belt continuation
  before: |
    _ _ _ v
    _ _ < <
  after: |
    _ _  _ v _
    > >i < < >o >

- name: Forwards curved belt continuation, too long
  before: |
    _ _ v
    _ _ > > > > >
  after: |
    _ _  v   _
    > > > > > > > *>
  expected_errors: [too_far_to_connect]

- name: Backwards curved belt continuation, too long to check
  before: |
    _ _ _ _ _ v
    _ < < < < <
  after: |
    _ _ _ _ _ v
    > > > > > < *>
  expected_errors: [entity_in_the_way]

- name: 2 backwards curved belts
  before: |
    _ _ _ v
    _ _ ^ <
  after: |
    _ _ _  v _
    > >i ^ < >o >

- name: 2 forwards curved belts
  before: |
    _ _ v
    _ _ > ^
  after: |
    _ _  v _ _
    > >i > ^ >o >

- name: sideloaded belt is normal obstacle
  before: |
    _ _ > ^ <
  after: |
    > > >i ^ >o >

- name: sideloaded belt is normal obstacle 2
  before: |
    _ _ v
    _ _ v < _
  after: |
    _ _  v   _
    > >i v >o >

- name: sideloaded belt is not obstacle
  before: |
    _ _ v
    _ > > _ _
  after: |
    _ _ v
    > > > > >

- name: curved belt after obstacle is obstacle
  before: |
    _ _ v
    _ X >
  after: |
    _  _ v
    >i X > >o >

- name: running into a curved belt is error
  before: |
    _ > ^
  after: |
    > > ^ *>
  expected_errors: [entity_in_the_way]

- name: hovering over curved belt gives no error
  before: |
    _ > ^
  after: |
    > > ^

- name: curvy
  before: |
    _ _ _ ^ _ _ ^
    _ _ > ^ _ > ^
    _ _ ^ _ _ ^ _
  after: |
    _  _   _ ^ _ _ ^
    2> 2>i > ^ _ > ^ 2>o
    _  _   ^ _ _ ^ _

- name: first belt shouldn't change effective curvature
  before: _ ^ <
  after: ">i ^ < >o"

- name: Belt weaving over backwards belt segment with curve
  before: |
    _ _ _  _  v
    _ < <o <i <
  after: |
    _ _ _  _  v
    2>i < <o <i < 2>o

- name: Integrating backwards belt segment without curve
  before: _ < <o <i <
  after: 2> 2> 2>i 2>o 2>

- name: If can't belt weave, is error
  before: |
    _ _ _  _  v
    _ < <o <i <
  after: |
    _  _ _  _   v
    > > >i >o *< >
  expected_errors: [entity_in_the_way]
